<<<<<<< main
=======
//quiz
const quiz = {
    questions: [{
            condition: 'Заполните пропуски и ответьте на вопрос по тексту',
            text: "If you match these criteria, contact your manager because you qualify for a salary (1)_____ :",
            responses: [{
                    text: 'Upgrade',
                    correct: true,
                },
                {
                    text: 'Grows'
                },
                {
                    text: 'Raise'
                },
            ]
        },
        {
            condition: 'Condition 2',
            text: "Question 2",
            responses: [{
                    text: 'answer 1',
                },
                {
                    text: 'answer 2',
                    correct: true,
                },
                {
                    text: 'answer 3'
                },
            ]
        },
        {
            condition: 'Condition 3',
            text: "Question 3",
            responses: [{
                    text: 'answer 1',
                },
                {
                    text: 'answer 2'
                },
                {
                    text: 'Raise 3',
                    correct: true,
                },
            ]
        },
        {
            condition: 'Condition 4',
            text: "Question 4",
            responses: [{
                    text: 'answer 1',
                    correct: true,
                },
                {
                    text: 'answer 2'
                },
                {
                    text: 'answer 3'
                },
            ]
        },
        {
            condition: 'Condition 5',
            text: "Question 5",
            responses: [{
                    text: 'answer 15',
                    correct: true,
                },
                {
                    text: 'answer 42'
                },
                {
                    text: 'answer 38'
                },
            ]
        }
    ],
}

const test = new Vue({
    el: "#app",
    data: {
        quiz: quiz,
        questionIndex: 0,
        userResponses: Array(quiz.questions.length).fill(false),
        text: `А это значит, что вам есть куда стремится.
        Осталось подтянуть совсем немного и вы освоите язык!`
    },
    methods: {
        handleRadio(value) {
            this.userResponses[this.questionIndex] = value ? value : false
        },
        next() {
            this.questionIndex++
        },
        score() {
            return this.userResponses.filter(val => val).length;
        }
    },
})






>>>>>>> local
//disabled link
document.querySelector('.b-menu__link_disabled').onclick = e => e.preventDefault()

//burger
const burger = document.querySelector('.b-burger')
const menu = document.querySelector('.b-menu')
burger.addEventListener('click', () => {
    burger.classList.toggle('active-burger')
    if (!menu.classList.contains('active-block') && !menu.classList.contains('active-menu')) {
        menu.classList.add('active-block')
        setTimeout(() => {
            menu.classList.add('active-menu')
        }, 100);
        document.body.classList.add('b-fixed')
    }
    if (menu.classList.contains('active-block') && menu.classList.contains('active-menu')) {
        menu.classList.remove('active-menu')
        setTimeout(() => {
            menu.classList.remove('active-block')
        }, 400);
        document.body.classList.remove('b-fixed')
    }
})

//ACCORDEON
const accordeonBtn = document.querySelectorAll('[data-accordeon-btn]');
const accordeonContent = document.querySelectorAll('[data-accordeon-content]');

accordeonBtn.forEach(el => {
    el.addEventListener('click', event => {
        if (!el.classList.contains('active')) {
            cleanActivBtns()
            el.classList.add('active');
            const target = event.currentTarget.getAttribute('data-accordeon-btn');
            hideAccordeons()
            let currentAccordeon = document.querySelector(`[data-accordeon-content="${target}"]`);
            var accordeonChild = currentAccordeon.firstElementChild.scrollHeight;
            currentAccordeon.style.height = `calc(${accordeonChild}px + 10.6vw)`;
            currentAccordeon.classList.add('active')
        } else if (el.classList.contains('active')) {
            cleanActivBtns()
            hideAccordeons()
        }


        function hideAccordeons() {
            accordeonContent.forEach(el => {
                el.style.height = '0';
                el.classList.remove('active')
            })
        }

        function cleanActivBtns() {
            accordeonBtn.forEach(el => {
                el.classList.remove('active')
            })
        }
    })
})


//LOAD VIDEO from link after click 'play'
const videos = document.querySelectorAll('.b-video');
let generateUrl = function (id) {
    let query = '?rel=0&showinfo=0&autoplay=1';
    return 'https://www.youtube.com/embed/' + id + query;
};
let createIframe = function (id) {
    let iframe = document.createElement('iframe');
    iframe.setAttribute('allowfullscreen', '');
    iframe.setAttribute('allow', 'autoplay; encrypted-media');
    iframe.setAttribute('src', generateUrl(id));
    return iframe;
};
videos.forEach((el) => {
    let videoHref = el.getAttribute('data-video');
    let deletedLength = 'https://youtu.be/'.length;
    let videoId = videoHref.substring(deletedLength, videoHref.length);
    let img = el.querySelector('img');
    let youtubeImgSrc = 'https://i.ytimg.com/vi/' + videoId + '/maxresdefault.jpg';
    img.setAttribute('src', youtubeImgSrc);
    el.addEventListener('click', (e) => {
        e.preventDefault();
        let iframe = createIframe(videoId);
        el.querySelector('img').remove();
        el.appendChild(iframe);
        el.querySelector('button').remove();
    });
});

//---MODALS---
//hide all modals
const modalOpen = document.querySelectorAll('[data-modal-open]')
const modals = document.querySelectorAll('[data-modal]')
const moadalInner = document.querySelectorAll('.b-modal')
const closeModal = document.querySelectorAll('[data-modal-close]')
function hideModals() {
    modals.forEach(elem => {
      elem.classList.remove('b-show');
    });
  };
  
  //find & open current modal, close rest & block scroll
  modalOpen.forEach(elem => {
    elem.addEventListener('click', event => {
      event.preventDefault()
      let target = event.currentTarget.getAttribute('data-modal-open');
      hideModals()
      document.body.classList.add('b-blockScroll')
      let targetModal = document.querySelector(`[data-modal="${target}"]`);
      targetModal.classList.add('b-show');
      let currentVideo = document.querySelector('video')
      if (targetModal.contains(currentVideo)) {
        currentVideo.play()
        currentVideo.setAttribute('data-play', '')
      }
    });
  });
  
  //close btn active 
  closeModal.forEach(el => el.onclick = () => {
    hideModals();
    document.body.classList.remove('b-blockScroll');
  });
  
  //close to click overlay 
  window.addEventListener('click', function (e) {
    modals.forEach(el => {
      if (el == e.target && e.target != moadalInner) {
        document.body.classList.remove('b-blockScroll')
        hideModals();
        closeVideo();
      };
    });
  });

  function closeVideo() {
    currentPlayVideo.forEach(el => {
      el.pause();
      el.currentTime = 0;
    })
  }

//sliders
const swiper = new Swiper(".mySwiper", {
    spaceBetween: 100,
    effect: "fade",
    fadeEffect: {
        crossFade: true,
    },
    pagination: {
        el: ".swiper-pagination",
        type: 'custom',
        renderCustom: function (swiper, current, total) {
            if (current < 10) {
                current = '0' + current
            }
            if (total < 10) {
                total = '0' + total
            }
            return current + ' ... ' + (total);
        }
    },
    navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
    },
});

// const swiper = new Swiper(".mySwiper", {
//     spaceBetween: 100,
//     effect: "fade",
//     fadeEffect: {
//         crossFade: true,
//     },
//     pagination: {
//         el: ".swiper-pagination",
//         type: 'custom',
//         renderCustom: function (swiper, current, total) {
//             if (current < 10) {
//                 total = '0' + total
//             }
//             if (total < 10) {
//                 current = '0' + current
//             }
//             return current + ' ... ' + (total);
//         }
//     },
//     navigation: {
//         nextEl: ".swiper-button-next",
//         prevEl: ".swiper-button-prev",
//     },
// });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiPDw8PDw8PCBtYWluXG49PT09PT09XG4vL3F1aXpcbmNvbnN0IHF1aXogPSB7XG4gICAgcXVlc3Rpb25zOiBbe1xuICAgICAgICAgICAgY29uZGl0aW9uOiAn0JfQsNC/0L7Qu9C90LjRgtC1INC/0YDQvtC/0YPRgdC60Lgg0Lgg0L7RgtCy0LXRgtGM0YLQtSDQvdCwINCy0L7Qv9GA0L7RgSDQv9C+INGC0LXQutGB0YLRgycsXG4gICAgICAgICAgICB0ZXh0OiBcIklmIHlvdSBtYXRjaCB0aGVzZSBjcml0ZXJpYSwgY29udGFjdCB5b3VyIG1hbmFnZXIgYmVjYXVzZSB5b3UgcXVhbGlmeSBmb3IgYSBzYWxhcnkgKDEpX19fX18gOlwiLFxuICAgICAgICAgICAgcmVzcG9uc2VzOiBbe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnVXBncmFkZScsXG4gICAgICAgICAgICAgICAgICAgIGNvcnJlY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdHcm93cydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1JhaXNlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbmRpdGlvbjogJ0NvbmRpdGlvbiAyJyxcbiAgICAgICAgICAgIHRleHQ6IFwiUXVlc3Rpb24gMlwiLFxuICAgICAgICAgICAgcmVzcG9uc2VzOiBbe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnYW5zd2VyIDEnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnYW5zd2VyIDInLFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnYW5zd2VyIDMnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgY29uZGl0aW9uOiAnQ29uZGl0aW9uIDMnLFxuICAgICAgICAgICAgdGV4dDogXCJRdWVzdGlvbiAzXCIsXG4gICAgICAgICAgICByZXNwb25zZXM6IFt7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdhbnN3ZXIgMScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdhbnN3ZXIgMidcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1JhaXNlIDMnLFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbmRpdGlvbjogJ0NvbmRpdGlvbiA0JyxcbiAgICAgICAgICAgIHRleHQ6IFwiUXVlc3Rpb24gNFwiLFxuICAgICAgICAgICAgcmVzcG9uc2VzOiBbe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnYW5zd2VyIDEnLFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnYW5zd2VyIDInXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdhbnN3ZXIgMydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBjb25kaXRpb246ICdDb25kaXRpb24gNScsXG4gICAgICAgICAgICB0ZXh0OiBcIlF1ZXN0aW9uIDVcIixcbiAgICAgICAgICAgIHJlc3BvbnNlczogW3tcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ2Fuc3dlciAxNScsXG4gICAgICAgICAgICAgICAgICAgIGNvcnJlY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdhbnN3ZXIgNDInXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdhbnN3ZXIgMzgnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIF0sXG59XG5cbmNvbnN0IHRlc3QgPSBuZXcgVnVlKHtcbiAgICBlbDogXCIjYXBwXCIsXG4gICAgZGF0YToge1xuICAgICAgICBxdWl6OiBxdWl6LFxuICAgICAgICBxdWVzdGlvbkluZGV4OiAwLFxuICAgICAgICB1c2VyUmVzcG9uc2VzOiBBcnJheShxdWl6LnF1ZXN0aW9ucy5sZW5ndGgpLmZpbGwoZmFsc2UpLFxuICAgICAgICB0ZXh0OiBg0JAg0Y3RgtC+INC30L3QsNGH0LjRgiwg0YfRgtC+INCy0LDQvCDQtdGB0YLRjCDQutGD0LTQsCDRgdGC0YDQtdC80LjRgtGB0Y8uXG4gICAgICAgINCe0YHRgtCw0LvQvtGB0Ywg0L/QvtC00YLRj9C90YPRgtGMINGB0L7QstGB0LXQvCDQvdC10LzQvdC+0LPQviDQuCDQstGLINC+0YHQstC+0LjRgtC1INGP0LfRi9C6IWBcbiAgICB9LFxuICAgIG1ldGhvZHM6IHtcbiAgICAgICAgaGFuZGxlUmFkaW8odmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudXNlclJlc3BvbnNlc1t0aGlzLnF1ZXN0aW9uSW5kZXhdID0gdmFsdWUgPyB2YWx1ZSA6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIG5leHQoKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uSW5kZXgrK1xuICAgICAgICB9LFxuICAgICAgICBzY29yZSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnVzZXJSZXNwb25zZXMuZmlsdGVyKHZhbCA9PiB2YWwpLmxlbmd0aDtcbiAgICAgICAgfVxuICAgIH0sXG59KVxuXG5cblxuXG5cblxuPj4+Pj4+PiBsb2NhbFxuLy9kaXNhYmxlZCBsaW5rXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYi1tZW51X19saW5rX2Rpc2FibGVkJykub25jbGljayA9IGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpXG5cbi8vYnVyZ2VyXG5jb25zdCBidXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYi1idXJnZXInKVxuY29uc3QgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iLW1lbnUnKVxuYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUtYnVyZ2VyJylcbiAgICBpZiAoIW1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUtYmxvY2snKSAmJiAhbWVudS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZS1tZW51JykpIHtcbiAgICAgICAgbWVudS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtYmxvY2snKVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIG1lbnUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLW1lbnUnKVxuICAgICAgICB9LCAxMDApO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2ItZml4ZWQnKVxuICAgIH1cbiAgICBpZiAobWVudS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZS1ibG9jaycpICYmIG1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUtbWVudScpKSB7XG4gICAgICAgIG1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLW1lbnUnKVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIG1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLWJsb2NrJylcbiAgICAgICAgfSwgNDAwKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdiLWZpeGVkJylcbiAgICB9XG59KVxuXG4vL0FDQ09SREVPTlxuY29uc3QgYWNjb3JkZW9uQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYWNjb3JkZW9uLWJ0bl0nKTtcbmNvbnN0IGFjY29yZGVvbkNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1hY2NvcmRlb24tY29udGVudF0nKTtcblxuYWNjb3JkZW9uQnRuLmZvckVhY2goZWwgPT4ge1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuICAgICAgICBpZiAoIWVsLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgIGNsZWFuQWN0aXZCdG5zKClcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWNjb3JkZW9uLWJ0bicpO1xuICAgICAgICAgICAgaGlkZUFjY29yZGVvbnMoKVxuICAgICAgICAgICAgbGV0IGN1cnJlbnRBY2NvcmRlb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1hY2NvcmRlb24tY29udGVudD1cIiR7dGFyZ2V0fVwiXWApO1xuICAgICAgICAgICAgdmFyIGFjY29yZGVvbkNoaWxkID0gY3VycmVudEFjY29yZGVvbi5maXJzdEVsZW1lbnRDaGlsZC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgICBjdXJyZW50QWNjb3JkZW9uLnN0eWxlLmhlaWdodCA9IGBjYWxjKCR7YWNjb3JkZW9uQ2hpbGR9cHggKyAxMC42dncpYDtcbiAgICAgICAgICAgIGN1cnJlbnRBY2NvcmRlb24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgfSBlbHNlIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICBjbGVhbkFjdGl2QnRucygpXG4gICAgICAgICAgICBoaWRlQWNjb3JkZW9ucygpXG4gICAgICAgIH1cblxuXG4gICAgICAgIGZ1bmN0aW9uIGhpZGVBY2NvcmRlb25zKCkge1xuICAgICAgICAgICAgYWNjb3JkZW9uQ29udGVudC5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgICAgICBlbC5zdHlsZS5oZWlnaHQgPSAnMCc7XG4gICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbGVhbkFjdGl2QnRucygpIHtcbiAgICAgICAgICAgIGFjY29yZGVvbkJ0bi5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pXG59KVxuXG5cbi8vTE9BRCBWSURFTyBmcm9tIGxpbmsgYWZ0ZXIgY2xpY2sgJ3BsYXknXG5jb25zdCB2aWRlb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYi12aWRlbycpO1xubGV0IGdlbmVyYXRlVXJsID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgbGV0IHF1ZXJ5ID0gJz9yZWw9MCZzaG93aW5mbz0wJmF1dG9wbGF5PTEnO1xuICAgIHJldHVybiAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvJyArIGlkICsgcXVlcnk7XG59O1xubGV0IGNyZWF0ZUlmcmFtZSA9IGZ1bmN0aW9uIChpZCkge1xuICAgIGxldCBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKCdhbGxvd2Z1bGxzY3JlZW4nLCAnJyk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgnYWxsb3cnLCAnYXV0b3BsYXk7IGVuY3J5cHRlZC1tZWRpYScpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGdlbmVyYXRlVXJsKGlkKSk7XG4gICAgcmV0dXJuIGlmcmFtZTtcbn07XG52aWRlb3MuZm9yRWFjaCgoZWwpID0+IHtcbiAgICBsZXQgdmlkZW9IcmVmID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXZpZGVvJyk7XG4gICAgbGV0IGRlbGV0ZWRMZW5ndGggPSAnaHR0cHM6Ly95b3V0dS5iZS8nLmxlbmd0aDtcbiAgICBsZXQgdmlkZW9JZCA9IHZpZGVvSHJlZi5zdWJzdHJpbmcoZGVsZXRlZExlbmd0aCwgdmlkZW9IcmVmLmxlbmd0aCk7XG4gICAgbGV0IGltZyA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xuICAgIGxldCB5b3V0dWJlSW1nU3JjID0gJ2h0dHBzOi8vaS55dGltZy5jb20vdmkvJyArIHZpZGVvSWQgKyAnL21heHJlc2RlZmF1bHQuanBnJztcbiAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCB5b3V0dWJlSW1nU3JjKTtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IGlmcmFtZSA9IGNyZWF0ZUlmcmFtZSh2aWRlb0lkKTtcbiAgICAgICAgZWwucXVlcnlTZWxlY3RvcignaW1nJykucmVtb3ZlKCk7XG4gICAgICAgIGVsLmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpLnJlbW92ZSgpO1xuICAgIH0pO1xufSk7XG5cbi8vLS0tTU9EQUxTLS0tXG4vL2hpZGUgYWxsIG1vZGFsc1xuY29uc3QgbW9kYWxPcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtbW9kYWwtb3Blbl0nKVxuY29uc3QgbW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtbW9kYWxdJylcbmNvbnN0IG1vYWRhbElubmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmItbW9kYWwnKVxuY29uc3QgY2xvc2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1vZGFsLWNsb3NlXScpXG5mdW5jdGlvbiBoaWRlTW9kYWxzKCkge1xuICAgIG1vZGFscy5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdiLXNob3cnKTtcbiAgICB9KTtcbiAgfTtcbiAgXG4gIC8vZmluZCAmIG9wZW4gY3VycmVudCBtb2RhbCwgY2xvc2UgcmVzdCAmIGJsb2NrIHNjcm9sbFxuICBtb2RhbE9wZW4uZm9yRWFjaChlbGVtID0+IHtcbiAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgbGV0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLW1vZGFsLW9wZW4nKTtcbiAgICAgIGhpZGVNb2RhbHMoKVxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdiLWJsb2NrU2Nyb2xsJylcbiAgICAgIGxldCB0YXJnZXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLW1vZGFsPVwiJHt0YXJnZXR9XCJdYCk7XG4gICAgICB0YXJnZXRNb2RhbC5jbGFzc0xpc3QuYWRkKCdiLXNob3cnKTtcbiAgICAgIGxldCBjdXJyZW50VmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd2aWRlbycpXG4gICAgICBpZiAodGFyZ2V0TW9kYWwuY29udGFpbnMoY3VycmVudFZpZGVvKSkge1xuICAgICAgICBjdXJyZW50VmlkZW8ucGxheSgpXG4gICAgICAgIGN1cnJlbnRWaWRlby5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGxheScsICcnKVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgXG4gIC8vY2xvc2UgYnRuIGFjdGl2ZSBcbiAgY2xvc2VNb2RhbC5mb3JFYWNoKGVsID0+IGVsLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgaGlkZU1vZGFscygpO1xuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnYi1ibG9ja1Njcm9sbCcpO1xuICB9KTtcbiAgXG4gIC8vY2xvc2UgdG8gY2xpY2sgb3ZlcmxheSBcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICBtb2RhbHMuZm9yRWFjaChlbCA9PiB7XG4gICAgICBpZiAoZWwgPT0gZS50YXJnZXQgJiYgZS50YXJnZXQgIT0gbW9hZGFsSW5uZXIpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdiLWJsb2NrU2Nyb2xsJylcbiAgICAgICAgaGlkZU1vZGFscygpO1xuICAgICAgICBjbG9zZVZpZGVvKCk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9KTtcblxuICBmdW5jdGlvbiBjbG9zZVZpZGVvKCkge1xuICAgIGN1cnJlbnRQbGF5VmlkZW8uZm9yRWFjaChlbCA9PiB7XG4gICAgICBlbC5wYXVzZSgpO1xuICAgICAgZWwuY3VycmVudFRpbWUgPSAwO1xuICAgIH0pXG4gIH1cblxuLy9zbGlkZXJzXG5jb25zdCBzd2lwZXIgPSBuZXcgU3dpcGVyKFwiLm15U3dpcGVyXCIsIHtcbiAgICBzcGFjZUJldHdlZW46IDEwMCxcbiAgICBlZmZlY3Q6IFwiZmFkZVwiLFxuICAgIGZhZGVFZmZlY3Q6IHtcbiAgICAgICAgY3Jvc3NGYWRlOiB0cnVlLFxuICAgIH0sXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogXCIuc3dpcGVyLXBhZ2luYXRpb25cIixcbiAgICAgICAgdHlwZTogJ2N1c3RvbScsXG4gICAgICAgIHJlbmRlckN1c3RvbTogZnVuY3Rpb24gKHN3aXBlciwgY3VycmVudCwgdG90YWwpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50IDwgMTApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gJzAnICsgY3VycmVudFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvdGFsIDwgMTApIHtcbiAgICAgICAgICAgICAgICB0b3RhbCA9ICcwJyArIHRvdGFsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudCArICcgLi4uICcgKyAodG90YWwpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIG5leHRFbDogXCIuc3dpcGVyLWJ1dHRvbi1uZXh0XCIsXG4gICAgICAgIHByZXZFbDogXCIuc3dpcGVyLWJ1dHRvbi1wcmV2XCIsXG4gICAgfSxcbn0pO1xuXG4vLyBjb25zdCBzd2lwZXIgPSBuZXcgU3dpcGVyKFwiLm15U3dpcGVyXCIsIHtcbi8vICAgICBzcGFjZUJldHdlZW46IDEwMCxcbi8vICAgICBlZmZlY3Q6IFwiZmFkZVwiLFxuLy8gICAgIGZhZGVFZmZlY3Q6IHtcbi8vICAgICAgICAgY3Jvc3NGYWRlOiB0cnVlLFxuLy8gICAgIH0sXG4vLyAgICAgcGFnaW5hdGlvbjoge1xuLy8gICAgICAgICBlbDogXCIuc3dpcGVyLXBhZ2luYXRpb25cIixcbi8vICAgICAgICAgdHlwZTogJ2N1c3RvbScsXG4vLyAgICAgICAgIHJlbmRlckN1c3RvbTogZnVuY3Rpb24gKHN3aXBlciwgY3VycmVudCwgdG90YWwpIHtcbi8vICAgICAgICAgICAgIGlmIChjdXJyZW50IDwgMTApIHtcbi8vICAgICAgICAgICAgICAgICB0b3RhbCA9ICcwJyArIHRvdGFsXG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICBpZiAodG90YWwgPCAxMCkge1xuLy8gICAgICAgICAgICAgICAgIGN1cnJlbnQgPSAnMCcgKyBjdXJyZW50XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgICAgICByZXR1cm4gY3VycmVudCArICcgLi4uICcgKyAodG90YWwpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSxcbi8vICAgICBuYXZpZ2F0aW9uOiB7XG4vLyAgICAgICAgIG5leHRFbDogXCIuc3dpcGVyLWJ1dHRvbi1uZXh0XCIsXG4vLyAgICAgICAgIHByZXZFbDogXCIuc3dpcGVyLWJ1dHRvbi1wcmV2XCIsXG4vLyAgICAgfSxcbi8vIH0pOyJdfQ==